From 6cbabfef911a0e12d4442b93c32a8a55ba318abb Mon Sep 17 00:00:00 2001
From: Aleksander Jan Bajkowski <olek2@wp.pl>
Date: Sat, 6 May 2023 21:23:03 +0200
Subject: [PATCH] fix build on 6.1

Ref: https://github.com/torvalds/linux/commit/cead18552660702a4a46f58e65188fe5f36e9dfe#diff-3baebf7635c17ef7bd82c8c594ac4ff09dc5722805af4f3a6608cfbba58f7e7a
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
---
 src/linux/ifxos_linux_thread_drv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/linux/ifxos_linux_thread_drv.c b/src/linux/ifxos_linux_thread_drv.c
index c049a67..7feb009 100644
--- a/src/linux/ifxos_linux_thread_drv.c
+++ b/src/linux/ifxos_linux_thread_drv.c
@@ -154,7 +154,7 @@ IFXOS_STATIC int IFXOS_KernelThreadStartup(void *data)
    retVal = pThrCntrl->pThrFct(&pThrCntrl->thrParams);
    pThrCntrl->thrParams.bRunning = IFX_FALSE;
 
-   complete_and_exit(&pThrCntrl->thrCompletion, (long)retVal);
+   kthread_complete_and_exit(&pThrCntrl->thrCompletion, (long)retVal);
 
    IFXOS_PRN_USR_DBG_NL( IFXOS, IFXOS_PRN_LEVEL_NORMAL,
       ("EXIT - Kernel Thread Startup <%s>" IFXOS_CRLF,
-- 
2.30.2

